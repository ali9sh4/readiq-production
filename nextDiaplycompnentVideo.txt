  const totalDuration = useMemo(() => {
    return allVideos.reduce((sum, v) => sum + (v.duration || 0), 0);
  }, [allVideos]);
    <span className="flex items-center gap-1">
                  <Clock className="w-3 h-3" />
                  {formatDuration(totalDuration)}
                </span>
                function formatDuration(seconds: number) {
  if (!seconds) return "0:00";
  const mins = Math.floor(seconds / 60);
  const secs = Math.floor(seconds % 60);
  return `${mins}:${secs.toString().padStart(2, "0")}`;
    <div className="flex items-center justify-between text-xs opacity-90">
                <span>
                  {completedVideos.size} من {allVideos.length} مكتمل
                </span>
              </div>
}




22222
  if (cleanPricing.price !== undefined && Array.isArray(courseData?.videos)) {
    updates.videos = courseData.videos.map((v: any) => ({
      ...v,
      coursePrice: cleanPricing.price,
    }));
  }



333  polling !!!
// Replace both useEffects with this:
useEffect(() => {
  if (!user || isLoading) return;

  const fetchData = async () => {
    try {
      // Fetch topup requests
      const topupsQuery = query(
        collection(db, "topup_requests"),
        where("status", "==", "pending"),
        orderBy("createdAt", "desc")
      );
      const topupsSnapshot = await getDocs(topupsQuery);
      const requests = topupsSnapshot.docs.map((doc) => ({
        id: doc.id,
        ...doc.data(),
      })) as TopupRequest[];
      setTopupRequests(requests);

      // Fetch courses
      const coursesQuery = query(
        collection(db, "courses"),
        orderBy("createdAt", "desc")
      );
      const coursesSnapshot = await getDocs(coursesQuery);
      const courses = coursesSnapshot.docs.map((doc) => ({
        id: doc.id,
        ...doc.data(),
      })) as Course[];

      const pending = courses.filter(
        (course) => !course.isApproved && !course.isRejected
      );
      const approved = courses.filter((course) => course.isApproved === true);
      const rejected = courses.filter((course) => course.isRejected === true);

      setPendingCourses(pending);
      setApprovedCourses(approved);
      setRejectedCourses(rejected);
    } catch (error) {
      console.error("Error fetching data:", error);
    }
  };

  // Fetch immediately
  fetchData();

  // Poll every 60 seconds
  const interval = setInterval(fetchData, 60000);

  return () => clearInterval(interval);
}, [user, isLoading]);